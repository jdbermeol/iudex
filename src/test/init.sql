CREATE TABLE IF NOT EXISTS PROGRAM (
  ID_PROGRAM INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  NAME VARCHAR(50) NOT NULL,
  PRIMARY KEY(ID_PROGRAM),
  UNIQUE (NAME)
);

CREATE TABLE IF NOT EXISTS USER_ (
  ID_USER_ INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  FIRST_NAMES VARCHAR(50) NOT NULL,
  LAST_NAMES VARCHAR(50) NOT NULL,
  USER_NAME VARCHAR(20) NOT NULL,
  PASSWORD_ VARCHAR(64) NOT NULL,
  ACTIVE BIT NOT NULL DEFAULT 0,
  ROLE_ TINYINT UNSIGNED NOT NULL DEFAULT 0,
  PRIMARY KEY(ID_USER_)
);

ALTER TABLE USER_ ADD UNIQUE ( USER_NAME );

CREATE TABLE IF NOT EXISTS CONFIRMATION_KEY (
  ID_USER_ INTEGER UNSIGNED NOT NULL,
  EXPIRATION_DATE DATE NOT NULL,
  CONFIRMATION_KEY VARCHAR(64) NOT NULL,
  PRIMARY KEY(ID_USER_),
  FOREIGN KEY(ID_USER_)
    REFERENCES USER_(ID_USER_)
      ON DELETE CASCADE
      ON UPDATE NO ACTION
);

CREATE TABLE IF NOT EXISTS USER_PROGRAM (
  ID_USER_PROGRAM INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  ID_USER_ INTEGER UNSIGNED NOT NULL,
  ID_PROGRAM INTEGER UNSIGNED NOT NULL,
  PRIMARY KEY(ID_USER_PROGRAM),
  FOREIGN KEY(ID_USER_)
    REFERENCES USER_(ID_USER_)
      ON DELETE CASCADE
      ON UPDATE NO ACTION,
  FOREIGN KEY(ID_PROGRAM)
    REFERENCES PROGRAM(ID_PROGRAM)
      ON DELETE CASCADE
      ON UPDATE NO ACTION
);

CREATE INDEX IF NOT EXISTS USER_COURSE_FKIndex1 ON USER_PROGRAM(ID_USER_);
CREATE INDEX IF NOT EXISTS USER_COURSE_FKIndex2 ON USER_PROGRAM(ID_PROGRAM);

CREATE TABLE IF NOT EXISTS PERIOD_ (
  ID_PERIOD INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  YEAR_ INT NOT NULL,
  SEMESTER INT NOT NULL,
  PRIMARY KEY(ID_PERIOD),
  UNIQUE ( YEAR_, SEMESTER)
);

--MERGE INTO PERIOD_

MERGE INTO PERIOD_ VALUES ('1','2008','1');
MERGE INTO PERIOD_ VALUES ('2','2008','2');
MERGE INTO PERIOD_ VALUES ('3','2009','1');
MERGE INTO PERIOD_ VALUES ('4','2009','2');
MERGE INTO PERIOD_ VALUES ('5','2010','1');
MERGE INTO PERIOD_ VALUES ('6','2010','2');
MERGE INTO PERIOD_ VALUES ('7','2011','1');
MERGE INTO PERIOD_ VALUES ('8','2011','2');
MERGE INTO PERIOD_ VALUES ('9','2012','1');

-- MERGE INTO PROGRAM

MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2520,'ADMINISTRACIÓN DE EMPRESAS');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2529,'ANTROPOLOGÍA - PROGRAMA ESPECIAL DE ADMISION PO');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2506,'ARQUITECTURA');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2507,'ARTES PLÁSTICAS');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2513,'BIOLOGÍA');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2538,'CIENCIA POLÍTICA');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2508,'CINE Y TELEVISIÓN');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2521,'CONTADURÍA PÚBLICA');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2539,'DERECHO');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2509,'DISEÑO GRÁFICO');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2510,'DISEÑO INDUSTRIAL');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2522,'ECONOMÍA');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2540,'ENFERMERÍA');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2526,'ESPAÑOL Y FILOLOGÍA CLÁSICA');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2514,'ESTADÍSTICA');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2534,'ESTUDIOS LITERARIOS');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2515,'FARMACIA');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2528,'FILOLOGIA E IDIOMAS - ESPAÑOL Y HUMANIDADES CLA...');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2524,'FILOLOGIA E IDIOMAS ALEMÁN');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2525,'FILOLOGÍA E IDIOMAS FRANCÉS');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2527,'FILOLOGÍA E IDIOMAS INGLÉS');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2530,'FILOSOFÍA');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2516,'FÍSICA');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2550,'FISIOTERAPIA');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2551,'FONOAUDIOLOGÍA');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2531,'GEOGRAFÍA');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2757,'GEOGRAFÍA - PROGRAMA ESPECIAL DE ADMISIÓN POR Á...');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2517,'GEOLOGÍA');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2532,'HISTORIA');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2541,'INGENIERÍA AGRÍCOLA');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2505,'INGENIERÍA AGRONÓMICA');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2364,'INGENIERÍA AGRONÓMICA - PRO. ESPECIAL DE ADMISI...');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2542,'INGENIERÍA CIVIL');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2543,'INGENIERÍA DE SISTEMAS');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2544,'INGENIERÍA ELÉCTRICA');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2545,'INGENIERÍA ELECTRÓNICA');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2546,'INGENIERÍA INDUSTRIAL');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2547,'INGENIERÍA MECÁNICA');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2548,'INGENIERIA MECATRÓNICA');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2549,'INGENIERÍA QUÍMICA');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2837,'LINGÜISTICA_2');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2533,'LINGÜISTICA');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2518,'MATEMÁTICAS');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2552,'MEDICINA');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2555,'MEDICINA VETERINARIA');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2511,'MÚSICA');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2512,'MÚSICA INSTRUMENTAL');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2553,'NUTRICIÓN Y DIETÉTICA');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2557,'ODONTOLOGÍA');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2535,'PSICOLOGÍA');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2519,'QUÍMICA');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2536,'SOCIOLOGÍA');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2554,'TERAPIA OCUPACIONAL');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2537,'TRABAJO SOCIAL');
MERGE INTO PROGRAM (ID_PROGRAM,NAME) VALUES (2556,'ZOOTECNIA');

-- MERGE INTO USER

MERGE INTO USER_ (ID_USER_,ACTIVE,FIRST_NAMES,LAST_NAMES,PASSWORD_,ROLE_,USER_NAME) VALUES (1,1,'Administrator','Administrator','15e2b0d3c33891ebb0f1ef609ec419420c20e320ce94c65fbc8c3312448eb225',1,'administrator');
MERGE INTO USER_ (ID_USER_,ACTIVE,FIRST_NAMES,LAST_NAMES,PASSWORD_,ROLE_,USER_NAME) VALUES (2,1,'Student 1','Student 1','15e2b0d3c33891ebb0f1ef609ec419420c20e320ce94c65fbc8c3312448eb225',0,'student1'); -- BL-3.1, BL-3.2
MERGE INTO USER_ (ID_USER_,ACTIVE,FIRST_NAMES,LAST_NAMES,PASSWORD_,ROLE_,USER_NAME) VALUES (3,0,'Student 2','Student 2','15e2b0d3c33891ebb0f1ef609ec419420c20e320ce94c65fbc8c3312448eb225',0,'student2'); -- BL-10.1
MERGE INTO USER_ (ID_USER_,ACTIVE,FIRST_NAMES,LAST_NAMES,PASSWORD_,ROLE_,USER_NAME) VALUES (4,0,'Student 3','Student 3','15e2b0d3c33891ebb0f1ef609ec419420c20e320ce94c65fbc8c3312448eb225',0,'student3'); -- BL-3.3
MERGE INTO USER_ (ID_USER_,ACTIVE,FIRST_NAMES,LAST_NAMES,PASSWORD_,ROLE_,USER_NAME) VALUES (5,1,'Student 4','Student 4','15e2b0d3c33891ebb0f1ef609ec419420c20e320ce94c65fbc8c3312448eb225',0,'student4'); -- BL-11.1

-- MERGE INTO USER_PROGRAM

MERGE INTO USER_PROGRAM VALUES (1,2,2520); -- student1
MERGE INTO USER_PROGRAM VALUES (2,3,2529); -- student2
MERGE INTO USER_PROGRAM VALUES (3,4,2506); -- student3
MERGE INTO USER_PROGRAM VALUES (4,4,2507); -- student4

-- MERGE INTO CONFIRMATION_KEY

MERGE INTO CONFIRMATION_KEY (ID_USER_,CONFIRMATION_KEY,EXPIRATION_DATE) VALUES (3,'1d141671f909bb21d3658372a7dbb87af521bc8d8a92088fbdada64604bf1cf1',DATEADD('DAY',1,CURRENT_DATE())); -- student2, BL-10.1
MERGE INTO CONFIRMATION_KEY (ID_USER_,CONFIRMATION_KEY,EXPIRATION_DATE) VALUES (4,'f521bc8d8a92088fbdada64604bf1cf11d141671f909bb21d3658372a7dbb87a',DATEADD('DAY',1,CURRENT_DATE())); -- student3
