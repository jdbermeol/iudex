<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                template="./../templates/template.xhtml"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:my="http://java.sun.com/jsf/composite/iudex"
		xmlns:c="http://java.sun.com/jsp/jstl/core">
    <f:metadata>
        <f:event type="preRenderView" listener="#{viewCourse.preRenderView()}" />
    </f:metadata>
    <ui:define name="content">

	    <div class="row-fluid">
        <div class="span3">
          <div class="well sidebar-nav span3" style="position: fixed;">


	  <div class="professor-photo" >
		  <a href=""><img src="#{viewCourse.professor.imageUrl}"/></a>
              <span class="vote-prof">
                <div></div>
              </span>
              <ul class="actions">
                <li class="upvote-prof"><a href="#" class="icon-thumbs-up"></a></li>
                <li class="downvote-prof"><a href="#" class="icon-thumbs-down"></a></li>
              </ul>
              <div>
		      <h5><a href="professors/view.html?id=#{viewCourse.professor.id}">#{viewCourse.course.professor.fullName}</a></h5>
              </div>
            </div>



          </div><!--/.well -->
        </div><!--/span-->
        <div class="span8">
		<h:form id="voteForm">
		<ui:repeat var="comment" value="#{viewCourse.comments}" varStatus="status">
	<!-- Beginning of comment -->
        <div class="row-fluid">
	<div class="comment-container span12">
          <div class="comment">
            <div class="comment-text span12">
              <div class="comment-rating">
		      Calificaci√≥n del curso : 
                <span class="icon-star"></span>
                <span class="icon-star-empty"></span>
                <span class="icon-star-empty"></span>
              </div>
              <div class="comment-photo thumbnail">
                <img src="http://placekitten.com/140/140" alt="profesor x" />
                <h5>#{comment.user.name}</h5>
                <p>CARRERA</p>
              </div>
              <p>
		      #{comment.content}
              </p>
	      <div class="vote">
		      <div class="vote-wrapper"><h:commandLink action="#{rating.votePositiveComment(comment)}" class="upvote"><f:ajax event="action" execute="@form" render="voteCount"/></h:commandLink> <f:param name="id" value="#{viewCourse.course.id}" /></div>
		      <h:panelGroup id="voteCount" class="vote-wrapper">
	      		<h:outputText  class="vote-count" value="#{comment.rating.positive-comment.rating.negative}"/>
		      </h:panelGroup>
		      <div class="vote-wrapper"><h:commandLink action="#{rating.voteNegativeComment(comment)}" class="downvote"><f:ajax event="action" execute="@form" render="voteCount"/>                            <f:param name="id" value="#{viewCourse.course.id}" />
</h:commandLink></div>
              </div>
            </div>
            <div class="comment-photo"></div>
            <div class="comment-report">
              <span class=""><a href="#">Reportar comentario</a></span>
            </div>
               <div class="vote">
                <a href="#" class="upvote "></a>
                <span class="vote-count">1337</span>
                <a href="#" class="downvote "></a>
              </div>
	  </div>

         </div>
	</div><!--/row-->
	<!-- Ending of comment -->
		</ui:repeat>
		</h:form>
        </div><!--/span-->
      </div><!--/row-->
    </ui:define>
	<!--fitText code-->
	<script type="text/javascript">
	$(".fittext-subject").fitText(1.2, { minFontSize: '100px', maxFontSize: '280px' });
	$(".fittext-rating").fitText(1.2, { minFontSize: '65px', maxFontSize: '80px' });
	</script>
	<!-- End of fitText code-->

</ui:composition>
